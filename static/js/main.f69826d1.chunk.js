(this["webpackJsonpghost-app"]=this["webpackJsonpghost-app"]||[]).push([[0],{131:function(e,t,n){},159:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=(n(131),n(42)),s=n(8),u=n(12),l=n(26),d=n(185),j=n(23),b=n(1),m=function(e){var t=e.joinGame,n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),u=s[0],m=s[1],f=Object(a.useState)(!1),p=Object(l.a)(f,2),h=p[0],O=p[1];return Object(b.jsxs)("div",{children:[Object(b.jsxs)(d.c,{elevation:2,children:[Object(b.jsx)("h2",{children:"Join a Game"}),Object(b.jsx)(d.e,{maxLength:10,onChange:function(e){return o(e.target.value)},placeholder:"Room Code..."}),Object(b.jsx)(d.e,{maxLength:10,onChange:function(e){return m(e.target.value)},placeholder:"Player Name..."}),Object(b.jsx)(d.b,{text:"Join",intent:j.a.PRIMARY,onClick:function(){return function(e,t,n){0==e.length||0==t.length?O(!0):n(e,t)}(c,u,t)}})]}),Object(b.jsx)(d.a,{isOpen:h,onClose:function(){return O(!1)},canEscapeKeyCancel:!0,canOutsideClickCancel:!0,confirmButtonText:"Okay",intent:j.a.WARNING,children:Object(b.jsx)("p",{children:"You must enter a room code and player name."})})]})},f=n(28),p=n(34),h=function(){var e=p.isMobile?"":"Buy me a coffee";return Object(b.jsx)(d.b,{icon:"dollar",text:e,onClick:function(){window.open("https://www.buymeacoffee.com/k2bd","_blank")},intent:"primary"})},O=n(6),x=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=p.isMobile?"":"How to play";return Object(b.jsxs)("div",{children:[Object(b.jsx)(d.b,{icon:"info-sign",text:c,onClick:function(){return r(!0)},intent:j.a.PRIMARY}),Object(b.jsx)(d.d,{icon:"info-sign",onClose:function(){return r(!1)},title:"How to play 2D Ghost",isOpen:n,children:Object(b.jsxs)("div",{className:O.DIALOG_BODY,children:[Object(b.jsx)("h3",{children:"Overview"}),Object(b.jsx)("p",{children:"2D Ghost is a competitive word building game in which players take turns placing letters on a board while trying to avoid completing words."}),Object(b.jsx)("h3",{children:"Where can I place a tile?"}),Object(b.jsx)("p",{children:"A new tile can be placed either at the first free tile along the horizontal or vertical edges, or at any tile that has at least 3 neighbors (including diagonals). TODO: example images."}),Object(b.jsx)("h3",{children:"Challenges"}),Object(b.jsx)("p",{children:"A move can be challenged by any player. The challenge can be because the player believes the previous move either completed a word, or cannot complete a word, in the row or column the most recent turn was made in. Remember that words being built must start at the edges. (TODO: examples)."})]})})]})},g=function(e){var t=e.roomCode;return Object(b.jsxs)(d.f,{children:[Object(b.jsxs)(d.f.Group,{align:f.a.LEFT,children:[Object(b.jsx)(d.f.Heading,{children:"2D Ghost"}),Object(b.jsx)(d.f.Divider,{}),Object(b.jsx)(d.f.Heading,{children:t})]}),Object(b.jsxs)(d.f.Group,{align:f.a.RIGHT,children:[Object(b.jsx)(x,{}),Object(b.jsx)(d.f.Divider,{}),Object(b.jsx)(h,{})]})]})},v=n(20),y=Object(v.a)("setPlayerName"),C=(n(159),function(){var e=Object(u.b)(),t=Object(s.g)();return Object(b.jsxs)("div",{className:"game-join-page",children:[Object(b.jsx)(g,{}),Object(b.jsx)("div",{className:"vertical-centering",children:Object(b.jsx)(m,{joinGame:function(n,a){return function(n,a){e(y(a)),t.push("/room/".concat(n))}(n,a)}})})]})}),w=n(73),N=n.n(w),k=n(21),S=n.n(k),L=n(31),P=n(74),G=n.n(P),D="https://ce5muj9w5f.execute-api.eu-west-2.amazonaws.com/main";console.log(D);var R=G.a.create({baseURL:D}),A=Object(v.b)("games/fetchGameByRoomCode",function(){var e=Object(L.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/game/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(v.b)("games/createGame",function(){var e=Object(L.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("/game/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(v.b)("games/joinGame",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var a,r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.player,e.next=3,R.post("/game/".concat(a,"/player"),r);case 3:if(404!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:404}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(v.b)("games/makeMove",function(){var e=Object(L.a)(S.a.mark((function e(t,n){var a,r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.move,e.next=3,R.post("/game/".concat(a,"/move"),r);case 3:if(200===(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:c.status}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=(n(179),function(e){var t=e.letter,n=e.position,a=e.isPlayable,r=e.isMostRecentlyPlayed,c=a?"#98f795":r?"#fff759":"#98f795",o=Object(u.c)((function(e){return e.player.localPlayer})),i=Object(u.c)((function(e){return e.game})).game,s=Object(u.b)(),l=(null===o||void 0===o?void 0:o.name)!==(null===i||void 0===i?void 0:i.turnPlayerName)||!a,d=Object(b.jsx)("input",{type:"text",className:"tile-input",disabled:l,value:t||"",size:1,onChange:function(e){return function(e){var t=e.toUpperCase();/[A-Z]/.test(t)&&null!==i&&null!==o&&s(I({roomCode:i.roomCode,move:{playerName:o.name,position:n,letter:t}}))}(e.target.value)}});return Object(b.jsx)("div",{className:"tile",style:{background:c},children:Object(b.jsx)("div",{className:"tile-content",children:d})})}),B=function(e,t){var n=t.x,a=t.y;return null===e[n][a]&&(0===n&&0===a||(0==n&&null!==e[n][a-1]||(0==a&&null!==e[n-1][a]||function(e,t){var n=t.x,a=t.y;return e.slice(n-1,n+2).map((function(e){return e.slice(a-1,a+2).map((function(e){return e?1:0})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0)}(e,{x:n,y:a})>=3)))},H=function(){var e=Object(u.c)((function(e){return e.game})).game,t=(e?e.moves:[]).map((function(e){return Math.max(e.position.x,e.position.y)})).reduce((function(e,t){return Math.max(e,t)}),0)+2,n=Array.from(Array(t).keys()).map((function(){return Array.from(Array(t).keys()).map((function(){return null}))}));null!==e&&e.moves.forEach((function(e){return n[e.position.x][e.position.y]=e.letter}));var a=n.map((function(t,a){return Object(b.jsx)("div",{style:{flexDirection:"row"},children:t.map((function(t,r){var c;return Object(b.jsx)(T,{letter:t,position:{x:a,y:r},isPlayable:B(n,{x:a,y:r}),isMostRecentlyPlayed:(null===e||void 0===e||null===(c=e.moves[e.moves.length-1])||void 0===c?void 0:c.position)==={x:a,y:r}},r)}))},a)}));return Object(b.jsx)("div",{style:{display:"flex"},children:a})},J=function(e){var t=e.player,n=e.turnPlayer?Object(b.jsx)("b",{children:t.name}):t.name;return Object(b.jsx)("p",{children:n})},W=function(){var e=Object(u.c)((function(e){return e.game})).game,t=e?e.players.map((function(t,n){return Object(b.jsx)(J,{player:t,turnPlayer:t.name==e.turnPlayerName},n)})):[];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:"Players"}),t]})},Y=(n(180),function(){var e=Object(s.h)().roomCode,t=Object(u.c)((function(e){return e.player.localPlayer})),n=Object(u.c)((function(e){return e.game})),a=n.game,r=n.gameLoadStatus,c=n.joined,o=Object(u.b)(),i=Object(s.g)();if(null===t)return i.push("/"),Object(b.jsx)("div",{});if(null===a)switch(r){case"idle":o(A(e));break;case"gameDoesNotExist":o(M(e))}else c||o(E({roomCode:e,player:t}));return N()((function(){return o(A(e))}),1e3),Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{roomCode:e}),Object(b.jsxs)("div",{className:"with-sidebar",children:[Object(b.jsx)("div",{className:"sidebar",children:Object(b.jsx)(W,{})}),Object(b.jsx)("div",{className:"not-sidebar",children:Object(b.jsx)("div",{className:"game-page",children:Object(b.jsx)("div",{className:"vertical-centering",children:Object(b.jsx)(H,{})})})})]})]})}),z=(n(181),function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(i.a,{basename:"/",children:Object(b.jsxs)(s.d,{children:[Object(b.jsx)(s.b,{path:"/",exact:!0,component:C}),Object(b.jsx)(s.b,{path:"/room/:roomCode",component:Y}),Object(b.jsx)(s.a,{to:"/"})]})})})}),F=n(13),U=n(30),V=Object(v.d)({name:"games",initialState:{game:null,gameLoadStatus:"idle",joined:!1},reducers:{},extraReducers:function(e){e.addCase(A.pending,(function(e){e.gameLoadStatus="loading"})),e.addCase(A.fulfilled,(function(e,t){e.game=t.payload,e.gameLoadStatus="idle"})),e.addCase(A.rejected,(function(e,t){e.game=null,e.gameLoadStatus="gameDoesNotExist",t.payload&&404==t.payload.statusCode&&(e.gameLoadStatus="gameDoesNotExist")})),e.addCase(M.pending,(function(e){e.game=null,e.gameLoadStatus="loading"})),e.addCase(M.fulfilled,(function(e,t){e.game=t.payload,e.gameLoadStatus="idle"})),e.addCase(M.rejected,(function(e){e.game=null,e.gameLoadStatus="error"})),e.addCase(E.pending,(function(e){e.gameLoadStatus="joining",e.joined=!1})),e.addCase(E.fulfilled,(function(e,t){e.gameLoadStatus="idle",e.joined=!0,e.game=t.payload})),e.addCase(E.rejected,(function(e){e.gameLoadStatus="error",e.joined=!1})),e.addCase(I.pending,(function(){})),e.addCase(I.fulfilled,(function(e,t){e.game=t.payload}))}}),_=Object(v.c)({localPlayer:null},(function(e){return e.addCase(y,(function(e,t){e.localPlayer={name:t.payload}}))})),K=Object(F.b)({game:V.reducer,player:_}),Z=Object(F.d)(K,Object(F.a)(U.a));o.a.render(Object(b.jsx)(u.a,{store:Z,children:Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(z,{})})}),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.f69826d1.chunk.js.map