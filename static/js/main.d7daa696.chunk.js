(this["webpackJsonpghost-app"]=this["webpackJsonpghost-app"]||[]).push([[0],{130:function(e,t,n){},157:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=(n(130),n(41)),s=n(8),u=n(12),l=n(26),d=n(183),j=n(23),b=n(1),m=function(e){var t=e.joinGame,n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),u=s[0],m=s[1],f=Object(a.useState)(!1),p=Object(l.a)(f,2),O=p[0],h=p[1];return Object(b.jsxs)("div",{children:[Object(b.jsxs)(d.c,{elevation:2,children:[Object(b.jsx)("h2",{children:"Join a Game"}),Object(b.jsx)(d.e,{maxLength:10,onChange:function(e){return o(e.target.value)},placeholder:"Room Code..."}),Object(b.jsx)(d.e,{maxLength:10,onChange:function(e){return m(e.target.value)},placeholder:"Player Name..."}),Object(b.jsx)(d.b,{text:"Join",intent:j.a.PRIMARY,onClick:function(){return function(e,t,n){0==e.length||0==t.length?h(!0):n(e,t)}(c,u,t)}})]}),Object(b.jsx)(d.a,{isOpen:O,onClose:function(){return h(!1)},canEscapeKeyCancel:!0,canOutsideClickCancel:!0,confirmButtonText:"Okay",intent:j.a.WARNING,children:Object(b.jsx)("p",{children:"You must enter a room code and player name."})})]})},f=n(28),p=function(){return Object(b.jsx)(d.b,{icon:"dollar",text:"Buy me a coffee",onClick:function(){window.open("https://www.buymeacoffee.com/k2bd","_blank")},intent:"primary"})},O=n(6),h=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(d.b,{icon:"info-sign",text:"How to play",onClick:function(){return r(!0)},intent:j.a.PRIMARY}),Object(b.jsx)(d.d,{icon:"info-sign",onClose:function(){return r(!1)},title:"How to play 2D Ghost",isOpen:n,children:Object(b.jsxs)("div",{className:O.DIALOG_BODY,children:[Object(b.jsx)("h3",{children:"Overview"}),Object(b.jsx)("p",{children:"2D Ghost is a competitive word building game in which players take turns placing letters on a board while trying to avoid completing words."}),Object(b.jsx)("h3",{children:"Where can I place a tile?"}),Object(b.jsx)("p",{children:"A new tile can be placed either at the first free tile along the horizontal or vertical edges, or at any tile that has at least 3 neighbors (including diagonals). TODO: example images."}),Object(b.jsx)("h3",{children:"Challenges"}),Object(b.jsx)("p",{children:"A move can be challenged by any player. The challenge can be because the player believes the previous move either completed a word, or cannot complete a word, in the row or column the most recent turn was made in. Remember that words being built must start at the edges. (TODO: examples)."})]})})]})},g=function(e){var t=e.roomCode;return Object(b.jsxs)(d.f,{children:[Object(b.jsxs)(d.f.Group,{align:f.a.LEFT,children:[Object(b.jsx)(d.f.Heading,{children:"2D Ghost"}),Object(b.jsx)(d.f.Divider,{}),Object(b.jsx)(d.f.Heading,{children:t})]}),Object(b.jsxs)(d.f.Group,{align:f.a.RIGHT,children:[Object(b.jsx)(h,{}),Object(b.jsx)(d.f.Divider,{}),Object(b.jsx)(p,{})]})]})},x=n(20),v=Object(x.a)("setPlayerName"),y=(n(157),function(){var e=Object(u.b)(),t=Object(s.g)();return Object(b.jsxs)("div",{className:"game-join-page",children:[Object(b.jsx)(g,{}),Object(b.jsx)("div",{className:"vertical-centering",children:Object(b.jsx)(m,{joinGame:function(n,a){return function(n,a){e(v(a)),t.push("/room/".concat(n))}(n,a)}})})]})}),C=n(72),w=n.n(C),k=n(21),N=n.n(k),S=n(31),L=n(73),P=n.n(L),G="https://ce5muj9w5f.execute-api.eu-west-2.amazonaws.com/main";console.log(G);var D=P.a.create({baseURL:G}),R=Object(x.b)("games/fetchGameByRoomCode",function(){var e=Object(S.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/game/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=Object(x.b)("games/createGame",function(){var e=Object(S.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post("/game/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(x.b)("games/joinGame",function(){var e=Object(S.a)(N.a.mark((function e(t,n){var a,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.player,e.next=3,D.post("/game/".concat(a,"/player"),r);case 3:if(404!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:404}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(x.b)("games/makeMove",function(){var e=Object(S.a)(N.a.mark((function e(t,n){var a,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.move,e.next=3,D.post("/game/".concat(a,"/move"),r);case 3:if(200===(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:c.status}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),M=(n(177),function(e){var t=e.letter,n=e.position,a=e.isPlayable,r=e.isMostRecentlyPlayed,c=a?"#98f795":r?"#fff759":"#98f795",o=Object(u.c)((function(e){return e.player.localPlayer})),i=Object(u.c)((function(e){return e.game})).game,s=Object(u.b)(),l=(null===o||void 0===o?void 0:o.name)!==(null===i||void 0===i?void 0:i.turnPlayerName)||!a,d=Object(b.jsx)("input",{type:"text",disabled:l,value:t||"",size:1,onChange:function(e){return function(e){var t=e.toUpperCase();/[A-Z]/.test(t)&&null!==i&&null!==o&&s(I({roomCode:i.roomCode,move:{playerName:o.name,position:n,letter:t}}))}(e.target.value)}});return Object(b.jsx)("div",{className:"tile",style:{background:c},children:Object(b.jsx)("div",{className:"tile-content",children:d})})}),T=function(e,t){var n=t.x,a=t.y;return null===e[n][a]&&(0===n&&0===a||(0==n&&null!==e[n][a-1]||(0==a&&null!==e[n-1][a]||function(e,t){var n=t.x,a=t.y;return e.slice(n-1,n+2).map((function(e){return e.slice(a-1,a+2).map((function(e){return e?1:0})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0)}(e,{x:n,y:a})>=3)))},B=function(){var e=Object(u.c)((function(e){return e.game})).game,t=Array.from(Array(10).keys()).map((function(){return Array.from(Array(10).keys()).map((function(){return null}))}));null!==e&&e.moves.forEach((function(e){return t[e.position.x][e.position.y]=e.letter}));var n=t.map((function(n,a){return Object(b.jsx)("div",{style:{flexDirection:"row"},children:n.map((function(n,r){var c;return Object(b.jsx)(M,{letter:n,position:{x:a,y:r},isPlayable:T(t,{x:a,y:r}),isMostRecentlyPlayed:(null===e||void 0===e||null===(c=e.moves[e.moves.length-1])||void 0===c?void 0:c.position)==={x:a,y:r}},r)}))},a)}));return Object(b.jsx)("div",{style:{display:"flex"},children:n})},H=function(e){var t=e.player,n=e.turnPlayer?Object(b.jsx)("b",{children:t.name}):t.name;return Object(b.jsx)("p",{children:n})},J=function(){var e=Object(u.c)((function(e){return e.game})).game,t=e?e.players.map((function(t,n){return Object(b.jsx)(H,{player:t,turnPlayer:t.name==e.turnPlayerName},n)})):[];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:"Players"}),t]})},W=(n(178),function(){var e=Object(s.h)().roomCode,t=Object(u.c)((function(e){return e.player.localPlayer})),n=Object(u.c)((function(e){return e.game})),a=n.game,r=n.gameLoadStatus,c=n.joined,o=Object(u.b)(),i=Object(s.g)();if(null===t)return i.push("/"),Object(b.jsx)("div",{});if(null===a)switch(r){case"idle":o(R(e));break;case"gameDoesNotExist":o(A(e))}else c||o(E({roomCode:e,player:t}));return w()((function(){return o(R(e))}),1e3),Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{roomCode:e}),Object(b.jsxs)("div",{className:"with-sidebar",children:[Object(b.jsx)("div",{className:"sidebar",children:Object(b.jsx)(J,{})}),Object(b.jsx)("div",{className:"not-sidebar",children:Object(b.jsx)("div",{className:"game-page",children:Object(b.jsx)("div",{className:"vertical-centering",children:Object(b.jsx)(B,{})})})})]})]})}),Y=(n(179),function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(i.a,{basename:"/",children:Object(b.jsxs)(s.d,{children:[Object(b.jsx)(s.b,{path:"/",exact:!0,component:y}),Object(b.jsx)(s.b,{path:"/room/:roomCode",component:W}),Object(b.jsx)(s.a,{to:"/"})]})})})}),z=n(13),F=n(30),U=Object(x.d)({name:"games",initialState:{game:null,gameLoadStatus:"idle",joined:!1},reducers:{},extraReducers:function(e){e.addCase(R.pending,(function(e){e.gameLoadStatus="loading"})),e.addCase(R.fulfilled,(function(e,t){e.game=t.payload,e.gameLoadStatus="idle"})),e.addCase(R.rejected,(function(e,t){e.game=null,e.gameLoadStatus="gameDoesNotExist",t.payload&&404==t.payload.statusCode&&(e.gameLoadStatus="gameDoesNotExist")})),e.addCase(A.pending,(function(e){e.game=null,e.gameLoadStatus="loading"})),e.addCase(A.fulfilled,(function(e,t){e.game=t.payload,e.gameLoadStatus="idle"})),e.addCase(A.rejected,(function(e){e.game=null,e.gameLoadStatus="error"})),e.addCase(E.pending,(function(e){e.gameLoadStatus="joining",e.joined=!1})),e.addCase(E.fulfilled,(function(e,t){e.gameLoadStatus="idle",e.joined=!0,e.game=t.payload})),e.addCase(E.rejected,(function(e){e.gameLoadStatus="error",e.joined=!1})),e.addCase(I.pending,(function(){})),e.addCase(I.fulfilled,(function(e,t){e.game=t.payload}))}}),V=Object(x.c)({localPlayer:null},(function(e){return e.addCase(v,(function(e,t){e.localPlayer={name:t.payload}}))})),_=Object(z.b)({game:U.reducer,player:V}),K=Object(z.d)(_,Object(z.a)(F.a));o.a.render(Object(b.jsx)(u.a,{store:K,children:Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Y,{})})}),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.d7daa696.chunk.js.map