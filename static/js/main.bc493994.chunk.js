(this["webpackJsonpghost-app"]=this["webpackJsonpghost-app"]||[]).push([[0],{226:function(e,t,n){},247:function(e,t,n){},267:function(e,t,n){},281:function(e,t){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),s=(n(226),n(66)),l=n(14),i=n(10),u=n(30),d=n(298),j=n(32),b=n(1),m=function(e){var t=e.joinGame,n=Object(a.useState)(""),r=Object(u.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(""),l=Object(u.a)(s,2),i=l[0],m=l[1],h=Object(a.useState)(!1),p=Object(u.a)(h,2),f=p[0],O=p[1];return Object(b.jsxs)("div",{children:[Object(b.jsxs)(d.d,{elevation:2,children:[Object(b.jsx)("h2",{children:"Join a Game"}),Object(b.jsx)(d.g,{maxLength:10,onChange:function(e){return o(e.target.value)},placeholder:"Room Code..."}),Object(b.jsx)(d.g,{maxLength:10,onChange:function(e){return m(e.target.value)},placeholder:"Player Name..."}),Object(b.jsx)(d.c,{text:"Join",intent:j.a.PRIMARY,onClick:function(){return function(e,t,n){0==e.length||0==t.length?O(!0):n(e,t)}(c,i,t)}})]}),Object(b.jsx)(d.a,{isOpen:f,onClose:function(){return O(!1)},canEscapeKeyCancel:!0,canOutsideClickCancel:!0,confirmButtonText:"Okay",intent:j.a.WARNING,children:Object(b.jsx)("p",{children:"You must enter a room code and player name."})})]})},h=n(48),p=n(58),f=function(){var e=p.isMobile?"":"Support";return Object(b.jsx)(d.b,{icon:"dollar",text:e,href:"https://www.buymeacoffee.com/k2bd",target:"_blank",intent:"primary"})},O=n(12),g=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],c=p.isMobile?"":"How to play";return Object(b.jsxs)("div",{children:[Object(b.jsx)(d.c,{icon:"info-sign",text:c,onClick:function(){return r(!0)},intent:j.a.PRIMARY}),Object(b.jsx)(d.e,{icon:"info-sign",onClose:function(){return r(!1)},title:"How to play 2D Ghost",isOpen:n,children:Object(b.jsxs)("div",{className:O.DIALOG_BODY,children:[Object(b.jsx)("h3",{children:"Overview"}),Object(b.jsx)("p",{children:"2D Ghost is a competitive word building game in which players take turns placing letters on a board while trying to avoid completing words."}),Object(b.jsx)("h3",{children:"Where can I place a tile?"}),Object(b.jsx)("p",{children:"A new tile can be placed either at the first free tile along the horizontal or vertical edges, or at any tile that has at least 3 neighbors (including diagonals). TODO: example images."}),Object(b.jsx)("h3",{children:"Challenges"}),Object(b.jsx)("p",{children:"A move can be challenged by any player. The challenge can be because the player believes the previous move either completed a word, or cannot complete a word, in the row or column the most recent turn was made in. Remember that words being built must start at the edges. (TODO: examples)."}),Object(b.jsx)("p",{children:"When a challenge has been made, players must vote on whether the challenge is successful. If it is, the challenged player will be removed from the game. If it fails, the challenger is removed. A challenge must get at least 50% of the votes to pass."})]})})]})},x=function(e){var t=e.roomCode;return Object(b.jsxs)(d.h,{children:[Object(b.jsxs)(d.h.Group,{align:h.a.LEFT,children:[Object(b.jsx)(d.h.Heading,{children:"2D Ghost"}),Object(b.jsx)(d.h.Divider,{}),Object(b.jsx)(d.h.Heading,{children:t})]}),Object(b.jsxs)(d.h.Group,{align:h.a.RIGHT,children:[Object(b.jsx)(g,{}),Object(b.jsx)(d.h.Divider,{}),Object(b.jsx)(f,{})]})]})},v=n(21),y=Object(v.a)("setPlayerName"),C=(n(247),function(){var e=Object(i.b)(),t=Object(l.g)();return Object(b.jsxs)("div",{className:"game-join-page",children:[Object(b.jsx)(x,{}),Object(b.jsx)("div",{className:"vertical-centering",children:Object(b.jsx)(m,{joinGame:function(n,a){return function(n,a){e(y(a)),t.push("/room/".concat(n))}(n,a)}})})]})}),w=n(101),N=n.n(w),k=n(297),R=n(17),P=n.n(R),S=n(34),A=n(102),D=n.n(A),L="https://ce5muj9w5f.execute-api.eu-west-2.amazonaws.com/main";console.log(L);var G=D.a.create({baseURL:L}),I=Object(v.b)("games/fetchGameByRoomCode",function(){var e=Object(S.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("/game/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(v.b)("games/createGame",function(){var e=Object(S.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post("/game/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(v.b)("games/joinGame",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var a,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.player,e.next=3,G.post("/game/".concat(a,"/player"),r);case 3:if(404!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:404}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),M=Object(v.b)("games/makeMove",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var a,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.move,e.next=3,G.post("/game/".concat(a,"/move"),r);case 3:if(200===(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:c.status}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(v.b)("games/makeChallenge",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var a,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.challenge,e.next=3,G.post("/game/".concat(a,"/challenge"),r);case 3:if(200===(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:c.status}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(v.b)("games/makeChallengeResponse",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var a,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.challengeResponse,e.next=3,G.post("/game/".concat(a,"/challenge-response"),r);case 3:if(200===(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:c.status}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Y=Object(v.b)("games/makeChallengeVote",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var a,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.roomCode,r=t.vote,e.next=3,G.post("/game/".concat(a,"/challenge-vote"),r);case 3:if(200===(c=e.sent).status){e.next=6;break}return e.abrupt("return",n.rejectWithValue({statusCode:c.status}));case 6:return e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),V=function(){var e=Object(i.c)((function(e){return e.player.localPlayer})),t=Object(i.c)((function(e){return e.game})).game,n=Object(i.b)(),a=t&&(null===e||void 0===e?void 0:e.name)===t.turnPlayerName&&t.moves.length>0&&null===t.challenge,r=function(a){null!==t&&null!==e&&n(T({roomCode:t.roomCode,challenge:{challengerName:e.name,move:t.moves[t.moves.length-1],type:a}}))},c=Object(b.jsx)(d.b,{icon:"flag",text:"Challenge",disabled:!a,intent:j.a.DANGER}),o=Object(b.jsxs)("div",{children:[Object(b.jsx)(d.c,{text:"No valid words",disabled:!a,intent:j.a.PRIMARY,onClick:function(){return r("NO_VALID_WORDS")}}),Object(b.jsx)(d.c,{text:"Word already complete",disabled:!a,intent:j.a.PRIMARY,onClick:function(){return r("COMPLETE_WORD")}})]});return Object(b.jsx)(k.a,{content:o,disabled:!a,placement:"bottom",children:c})},B=n(2),H=(n(267),function(e){var t=e.letter,n=e.position,a=e.isPlayable,r=e.isMostRecentlyPlayed?"#fff715":"#98f795",c=Object(i.c)((function(e){return e.player.localPlayer})),o=Object(i.c)((function(e){return e.game})).game,s=Object(i.b)(),l=(null===c||void 0===c?void 0:c.name)!==(null===o||void 0===o?void 0:o.turnPlayerName)||!a,u=Object(b.jsx)("input",{type:"text",className:"tile-input",disabled:l,value:t||"",size:1,onChange:function(e){return function(e){var t=e.toUpperCase();/[A-Z]/.test(t)&&null!==o&&null!==c&&s(M({roomCode:o.roomCode,move:{playerName:c.name,position:n,letter:t}}))}(e.target.value)}});return Object(b.jsx)("div",{className:"tile",style:{background:r},children:Object(b.jsx)("div",{className:"tile-content",children:u})})}),z=function(e,t){var n=e.filter((function(e){return e.position.y===t})).sort((function(e,t){return e.position.x-t.position.x})),a=n.map((function(e){return e.position.x})),r=n[n.length-1].position.x+1,c=Array.from(Array(r).keys()).map((function(e,t){return a.includes(t)?n[a.indexOf(t)].letter:null}));return console.log(c),c},F=function(e,t){var n=e.filter((function(e){return e.position.x===t})).sort((function(e,t){return e.position.y-t.position.y})),a=n.map((function(e){return e.position.y})),r=n[n.length-1].position.y+1;return Array.from(Array(r).keys()).map((function(e,t){return a.includes(t)?n[a.indexOf(t)].letter:null}))},J=function(e){var t=e.entries;return Object(b.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:t.map((function(e,t){return Object(b.jsx)(H,{letter:e,position:{x:t,y:0},isPlayable:!1,isMostRecentlyPlayed:!1},t)}))})},U=function(){var e,t=Object(i.c)((function(e){return e.player.localPlayer})),n=Object(i.c)((function(e){return e.game})).game,r=Object(a.useState)(""),c=Object(u.a)(r,2),o=c[0],s=c[1],l=Object(a.useState)(""),j=Object(u.a)(l,2),m=j[0],h=j[1],p=Object(i.b)();if(!n||!t||0==n.moves.length)return Object(b.jsx)(b.Fragment,{});var f=n.challenge&&n.challenge.move.playerName===t.name&&"AWAITING_RESPONSE"===n.challenge.state,O=n.moves[n.moves.length-1],g=z(n.moves,O.position.y),x=F(n.moves,O.position.x);return Object(b.jsxs)(d.e,{isOpen:f,title:"Challenge Response",isCloseButtonShown:!1,icon:"flag",children:[Object(b.jsxs)("div",{className:B.a.DIALOG_BODY,children:[Object(b.jsx)("h3",{children:"You have been challenged!"}),Object(b.jsxs)("p",{children:[null===n||void 0===n||null===(e=n.challenge)||void 0===e?void 0:e.challengerName," has challenged that your most recent move cannot make valid words."]}),Object(b.jsx)("p",{children:"Please provide words that can be made from the row and column of your last move, containing the placed letters and adding as many letters to the end as you want."}),Object(b.jsx)("p",{children:"Remember the words should be at least 4 letters long."}),Object(b.jsxs)(d.f,{label:"Row:",inline:!0,children:[Object(b.jsx)(J,{entries:g}),Object(b.jsx)(d.g,{placeholder:g.map((function(e){return e||"_"})).join("")+"...",onChange:function(e){return s(e.target.value)},value:o})]}),Object(b.jsxs)(d.f,{label:"Col:",inline:!0,children:[Object(b.jsx)(J,{entries:x}),Object(b.jsx)(d.g,{placeholder:x.map((function(e){return e||"_"})).join("")+"...",onChange:function(e){return h(e.target.value)},value:m})]})]}),Object(b.jsx)(d.c,{text:"Submit",onClick:function(){p(_({roomCode:n.roomCode,challengeResponse:{rowWord:o,colWord:m}}))},disabled:0===o.length||0===m.length})]})},K=function(){var e=Object(i.c)((function(e){return e.player.localPlayer})),t=Object(i.c)((function(e){return e.game})).game,n=Object(i.b)();if(!t||!e||0==t.moves.length||!t.challenge)return Object(b.jsx)(b.Fragment,{});var a,r=z(t.moves,t.challenge.move.position.y),c=F(t.moves,t.challenge.move.position.x),o=t.challenge&&"VOTING"===t.challenge.state,s=function(a){n(Y({roomCode:t.roomCode,vote:{voterName:e.name,proChallenge:a}}))},l=function(){var n;return null===(n=t.challenge)||void 0===n?void 0:n.votes.map((function(e){return e.voterName})).includes(e.name)};switch(t.challenge.type){case"NO_VALID_WORDS":var u,j,m=(null===(u=t.challenge.response)||void 0===u?void 0:u.rowWord)||"",h=(null===(j=t.challenge.response)||void 0===j?void 0:j.colWord)||"";a=Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[t.challenge.challengerName," believes valid words can't be made from the most recent move."]}),Object(b.jsxs)("p",{children:[t.challenge.move.playerName," has provided the following words in response."]}),Object(b.jsxs)(d.f,{label:"Row:",inline:!0,children:[Object(b.jsx)(d.f,{label:"Tiles:",inline:!1,children:Object(b.jsx)(J,{entries:r})}),Object(b.jsx)(d.f,{label:"Response:",inline:!1,children:Object(b.jsx)(J,{entries:m.split("")})})]}),Object(b.jsxs)(d.f,{label:"Col:",inline:!0,children:[Object(b.jsx)(d.f,{label:"Tiles:",inline:!1,children:Object(b.jsx)(J,{entries:c})}),Object(b.jsx)(d.f,{label:"Response:",inline:!1,children:Object(b.jsx)(J,{entries:h.split("")})})]})]});break;case"COMPLETE_WORD":a=Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[t.challenge.challengerName," believes the most recent move completed a word."]}),Object(b.jsxs)(d.f,{label:"Row:",inline:!0,children:[Object(b.jsx)("p",{children:"Tiles:"}),Object(b.jsx)(J,{entries:r})]}),Object(b.jsxs)(d.f,{label:"Col:",inline:!0,children:[Object(b.jsx)("p",{children:"Tiles:"}),Object(b.jsx)(J,{entries:c})]})]})}return Object(b.jsx)(d.e,{isOpen:o,title:"Challenge!",isCloseButtonShown:!1,icon:"flag",children:Object(b.jsxs)("div",{className:B.a.DIALOG_BODY,children:[Object(b.jsxs)("h3",{children:[t.challenge.challengerName," has challenged ",t.challenge.move.playerName,"!"]}),a,Object(b.jsx)("p",{children:"Is the challenge successful?"}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(b.jsx)(d.c,{text:"Yes",onClick:function(){return s(!0)},disabled:l()}),Object(b.jsx)(d.c,{text:"No",onClick:function(){return s(!1)},disabled:l()})]})]})})},Z=n(105),q=n.n(Z),Q=function(e,t){var n=t.x,a=t.y;return null===e[n][a]&&(0===n&&0===a||(0==n&&null!==e[n][a-1]||(0==a&&null!==e[n-1][a]||function(e,t){var n=t.x,a=t.y;return e.slice(n-1,n+2).map((function(e){return e.slice(a-1,a+2).map((function(e){return e?1:0})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0)}(e,{x:n,y:a})>=3)))},X=function(){var e=Object(i.c)((function(e){return e.game})),t=e.game,n=e.gameLoadStatus;if(["gameDoesNotExist","creatingGame","joining"].includes(n))return Object(b.jsx)(d.i,{size:d.j.LARGE});var a=(t?t.moves:[]).map((function(e){return Math.max(e.position.x,e.position.y)})).reduce((function(e,t){return Math.max(e,t)}),0)+2,r=Array.from(Array(a).keys()).map((function(){return Array.from(Array(a).keys()).map((function(){return null}))}));null!==t&&t.moves.forEach((function(e){return r[e.position.x][e.position.y]=e.letter}));var c=r.map((function(e,n){return Object(b.jsx)("div",{style:{flexDirection:"row"},children:e.map((function(e,a){var c;return Object(b.jsx)(H,{letter:e,position:{x:n,y:a},isPlayable:Q(r,{x:n,y:a}),isMostRecentlyPlayed:q()(null===t||void 0===t||null===(c=t.moves[t.moves.length-1])||void 0===c?void 0:c.position,{x:n,y:a})},a)}))},n)}));return Object(b.jsx)("div",{style:{display:"flex"},children:c})},$=function(e){var t=e.player,n=e.turnPlayer,a=e.loser,r=n?Object(b.jsx)("b",{children:t.name}):a?Object(b.jsx)("s",{children:t.name}):t.name;return Object(b.jsx)("p",{children:r})},ee=function(){var e=Object(i.c)((function(e){return e.game})).game,t=e?e.players.map((function(t,n){return Object(b.jsx)($,{player:t,turnPlayer:t.name==e.turnPlayerName,loser:!1},n)})):[],n=e?e.losers.map((function(e,t){return Object(b.jsx)($,{player:e,turnPlayer:!1,loser:!0},t)})):[];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h4",{children:"Players"}),t,n]})},te=(n(286),function(){var e=Object(l.h)().roomCode,t=Object(i.c)((function(e){return e.player.localPlayer})),n=Object(i.c)((function(e){return e.game})),a=n.game,r=n.gameLoadStatus,c=n.joined,o=Object(i.b)(),s=Object(l.g)();if(null===t)return s.push("/"),Object(b.jsx)("div",{});if(null===a)switch(r){case"idle":o(I(e));break;case"gameDoesNotExist":o(W(e))}else c||o(E({roomCode:e,player:t}));return N()((function(){return o(I(e))}),1e3),Object(b.jsxs)("div",{children:[Object(b.jsx)(x,{roomCode:e}),Object(b.jsxs)("div",{className:"with-sidebar",children:[Object(b.jsx)("div",{className:"sidebar",children:Object(b.jsx)(ee,{})}),Object(b.jsx)("div",{className:"not-sidebar",children:Object(b.jsxs)("div",{className:"game-page",children:[Object(b.jsx)("div",{className:"vertical-centering",children:Object(b.jsx)(X,{})}),Object(b.jsx)(V,{})]})})]}),Object(b.jsx)(U,{}),Object(b.jsx)(K,{})]})}),ne=(n(287),function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(s.a,{basename:"/",children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/",exact:!0,component:C}),Object(b.jsx)(l.b,{path:"/room/:roomCode",component:te}),Object(b.jsx)(l.a,{to:"/"})]})})})}),ae=n(16),re=n(50),ce=Object(v.d)({name:"games",initialState:{game:null,gameLoadStatus:"idle",joined:!1},reducers:{},extraReducers:function(e){e.addCase(I.pending,(function(e){e.gameLoadStatus="loading"})),e.addCase(I.fulfilled,(function(e,t){e.game=t.payload,e.gameLoadStatus="idle"})),e.addCase(I.rejected,(function(e,t){e.game=null,e.gameLoadStatus="gameDoesNotExist",t.payload&&404==t.payload.statusCode&&(e.gameLoadStatus="gameDoesNotExist")})),e.addCase(W.pending,(function(e){e.game=null,e.gameLoadStatus="loading"})),e.addCase(W.fulfilled,(function(e,t){e.game=t.payload,e.gameLoadStatus="idle"})),e.addCase(W.rejected,(function(e){e.game=null,e.gameLoadStatus="error"})),e.addCase(E.pending,(function(e){e.gameLoadStatus="joining",e.joined=!1})),e.addCase(E.fulfilled,(function(e,t){e.gameLoadStatus="idle",e.joined=!0,e.game=t.payload})),e.addCase(E.rejected,(function(e){e.gameLoadStatus="error",e.joined=!1})),e.addCase(M.pending,(function(){})),e.addCase(M.fulfilled,(function(e,t){e.game=t.payload})),e.addCase(T.fulfilled,(function(e,t){e.game=t.payload})),e.addCase(_.fulfilled,(function(e,t){e.game=t.payload})),e.addCase(Y.fulfilled,(function(e,t){e.game=t.payload}))}}),oe=Object(v.c)({localPlayer:null},(function(e){return e.addCase(y,(function(e,t){e.localPlayer={name:t.payload}}))})),se=Object(ae.b)({game:ce.reducer,player:oe}),le=Object(ae.d)(se,Object(ae.a)(re.a));o.a.render(Object(b.jsx)(i.a,{store:le,children:Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(ne,{})})}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.bc493994.chunk.js.map